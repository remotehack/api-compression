<html>

<head>
  <title>Bikkkke</title>
  <link href="https://fonts.googleapis.com/css2?family=Recursive&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Recursive', sans-serif;
    }

    label {
      display: block
    }
  </style>
</head>

<body>
  <h1>Mock bike</h1>

  <label>
    Power (watts)
    <input type="range" max="1000" />
  </label>

  <label>
    Resistance
    <output>--</output>
  </label>

  <script type="module">
    import PubSub from '/pubsub.js'
    const pubsub = new PubSub();

    const input = document.querySelector('input')
    const output = document.querySelector('output')

    pubsub.on("resistance", (s) => {
      console.log("resistance", s);
      output.innerText = s;
    })

    input.addEventListener("change", () => {
      pubsub.emit("power", input.valueAsNumber)
    })

  </script>

</body>

</html>